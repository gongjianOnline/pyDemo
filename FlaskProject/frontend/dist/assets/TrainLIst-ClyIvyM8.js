import{d as B,r as h,c,f as l,h as o,an as y,w as d,ao as L,k as u,e as t,F as b,n as w,ap as I,t as n,aq as r,ar as D,aD as F,I as N,G as S,K as z,O as m,P}from"./index-iZTeaJac.js";import{t as q}from"./index-2Fl6aFRQ.js";const A={class:""},G={class:"max-h-[70vh] overflow-y-auto"},K={class:"space-y-4"},O={class:"flex items-center justify-between mb-3"},U={class:"flex items-center space-x-3"},H={class:"text-lg font-semibold text-gray-800"},J={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},Q={class:"flex items-center space-x-2"},R={class:"text-sm font-medium"},W={class:"flex items-center space-x-2"},X={class:"text-sm font-medium"},Y={class:"flex items-center space-x-2"},Z={class:"text-sm font-medium"},k={class:"mb-4"},tt={class:"text-sm font-semibold text-gray-700 mb-2 flex items-center"},st={class:"bg-gray-50 rounded-lg p-3"},et={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2"},lt={class:"text-gray-600"},ot={class:"font-medium text-gray-800"},at={class:"flex flex-col md:flex-row md:items-center md:justify-between space-y-2 md:space-y-0"},dt={class:"flex items-center space-x-2"},nt={class:"text-sm font-medium text-blue-600 cursor-pointer hover:underline"},it={class:"flex items-center space-x-2"},rt={class:"text-right"},ct={class:"text-sm font-medium"},ut=["src"],mt={class:"flex justify-between items-center"},_t={class:"text-sm text-gray-500"},ft=B({__name:"TrainLIst",props:{modelId:{}},setup($){const V=$,_=h(!1),x=h([]),M=async()=>{_.value=!0;const a=await q({model_id:V.modelId});x.value=a.data},T=a=>{a()},C=a=>a&&a.includes("完成")?"success":a&&a.includes("失败")?"danger":"warning",E=(a,s)=>{const e=new Date(a),f=new Date(s)-e,i=Math.floor(f/1e3);if(i<60)return`${i}秒`;if(i<3600){const v=Math.floor(i/60),p=i%60;return`${v}分${p}秒`}else{const v=Math.floor(i/3600),p=Math.floor(i%3600/60);return`${v}小时${p}分`}},j=a=>a?`//${a}`:"";return(a,s)=>(m(),c("div",A,[l(o(y),{type:"primary",onClick:M,class:""},{default:d(()=>s[2]||(s[2]=[u(" 查看训练任务详情 ")])),_:1,__:[2]}),l(o(L),{modelValue:_.value,"onUpdate:modelValue":s[1]||(s[1]=e=>_.value=e),title:"算法训练任务列表",width:"90%","before-close":T,class:"task-modal"},{footer:d(()=>[t("div",mt,[t("span",_t," 共 "+n(x.value.length)+" 条训练任务记录 ",1),t("div",null,[l(o(y),{onClick:s[0]||(s[0]=e=>_.value=!1)},{default:d(()=>s[9]||(s[9]=[u("关闭")])),_:1,__:[9]})])])]),default:d(()=>[t("div",G,[t("div",K,[(m(!0),c(b,null,w(x.value,e=>(m(),c("div",{key:e.task_id,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow"},[t("div",O,[t("div",U,[l(o(I),{type:C(e.remarks),size:"small"},{default:d(()=>[u(" 任务 #"+n(e.task_id),1)]),_:2},1032,["type"]),t("h3",H,n(e.task_name||"未命名任务"),1)]),l(o(I),{type:"info",size:"small"},{default:d(()=>[u(" 算法ID: "+n(e.algorithm_id),1)]),_:2},1024)]),t("div",J,[t("div",Q,[l(o(r),null,{default:d(()=>[l(o(D))]),_:1}),t("div",null,[s[3]||(s[3]=t("div",{class:"text-sm text-gray-500"},"开始时间",-1)),t("div",R,n(e.start_time),1)])]),t("div",W,[l(o(r),null,{default:d(()=>[l(o(D))]),_:1}),t("div",null,[s[4]||(s[4]=t("div",{class:"text-sm text-gray-500"},"结束时间",-1)),t("div",X,n(e.end_time),1)])]),t("div",Y,[l(o(r),null,{default:d(()=>[l(o(F))]),_:1}),t("div",null,[s[5]||(s[5]=t("div",{class:"text-sm text-gray-500"},"耗时",-1)),t("div",Z,n(E(e.start_time,e.end_time)),1)])])]),t("div",k,[t("h4",tt,[l(o(r),{class:"mr-1"},{default:d(()=>[l(o(N))]),_:1}),s[6]||(s[6]=u(" 训练参数 "))]),t("div",st,[t("div",et,[(m(!0),c(b,null,w(e.params,(g,f)=>(m(),c("div",{key:f,class:"flex justify-between items-center py-1 px-2 bg-white rounded text-xs"},[t("span",lt,n(f)+":",1),t("span",ot,n(g),1)]))),128))])])]),t("div",at,[t("div",dt,[l(o(r),null,{default:d(()=>[l(o(S))]),_:1}),t("div",null,[s[7]||(s[7]=t("div",{class:"text-sm text-gray-500"},"模型文件",-1)),t("div",nt,n(e.attachment_url),1)])]),t("div",it,[l(o(r),null,{default:d(()=>[l(o(z))]),_:1}),t("div",rt,[s[8]||(s[8]=t("div",{class:"text-sm text-gray-500"},"训练结果",-1)),t("div",ct,n(e.remarks||"处理中"),1)])])]),t("div",null,[t("img",{src:j(e.file_path),alt:"",class:"w-full h-auto"},null,8,ut)])]))),128))])])]),_:1},8,["modelValue"])]))}}),pt=P(ft,[["__scopeId","data-v-4da107cb"]]);export{pt as T};
