import{d as B,o as A,r as i,X as P,c as g,e as t,f as a,w as d,g as x,t as s,Y as N,h as u,x as m,F as D,n as V,k as y,Z as S,a as U,O as f,P as q}from"./index-iZTeaJac.js";import{p as E,b as W,c as F}from"./index-BXSuu6V1.js";const G={class:"w-full min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4"},O={class:"mb-4"},X={class:"mb-4"},Z={class:"bg-white rounded-xl shadow-md border border-gray-200 p-4 mb-4"},$={class:"flex items-center mb-3"},J={class:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-semibold text-lg mr-3"},K={class:"text-lg font-semibold text-gray-800"},Q={class:"flex items-center space-x-3 mt-1"},tt={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},et={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2"},st={class:"bg-gray-50 rounded-lg p-2"},lt={class:"text-gray-800 font-mono text-sm"},at={class:"bg-gray-50 rounded-lg p-2"},ot={class:"text-gray-800 text-sm"},nt={class:"bg-gray-50 rounded-lg p-2"},dt={class:"text-gray-800 text-sm"},rt={class:"bg-gray-50 rounded-lg p-2 col-span-1"},it={class:"text-gray-800 font-mono text-sm"},ut={class:"bg-gray-50 rounded-lg p-2 col-span-2"},ct={class:"text-gray-800 text-sm"},_t={class:"flex flex-col justify-start mb-3"},mt={class:"bg-blue-50 rounded-lg p-3 mb-3"},gt={class:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs"},xt={class:"flex"},ft={class:"text-blue-800 font-medium"},bt={class:"flex"},pt={class:"text-blue-800 font-medium"},vt={class:"flex"},ht={class:"text-blue-800 font-medium"},yt={class:"flex"},wt={class:"text-blue-800 font-medium"},Yt={class:"bg-green-50 rounded-lg p-3"},kt={class:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs"},Dt={class:"flex"},Rt={class:"text-green-800 font-medium"},Ct={class:"flex"},Mt={class:"text-red-600 font-semibold flex-1"},Lt={class:"flex"},Vt={class:"text-green-800 font-medium"},jt={class:"flex"},It={class:"text-green-800 font-medium"},Ht={class:"flex md:col-span-2"},Tt={class:"text-green-800 font-medium"},zt={class:"flex md:col-span-2"},Bt={class:"text-green-800 font-medium"},At={class:"overflow-x-auto bg-gray-50 rounded-lg p-3"},Pt={class:"h-full bg-gradient-to-br from-slate-50 to-blue-50 p-6"},Nt={class:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 mb-6"},St={class:"flex items-center justify-between"},Ut={class:"flex items-center"},qt={class:"text-2xl font-bold text-gray-800 mb-1"},Et={class:"text-sm text-gray-600"},Wt={class:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6"},Ft={class:"overflow-hidden rounded-xl border border-gray-200"},Gt={class:"h-full flex flex-col bg-gradient-to-br from-slate-50 to-blue-50"},Ot={class:"flex-shrink-0 bg-white/90 backdrop-blur-sm border-b border-slate-200/60 shadow-lg"},Xt={class:"flex items-center justify-between px-6 py-4"},Zt={class:"flex items-center gap-3"},$t={class:"text-lg font-semibold text-slate-800 flex items-center"},Jt={class:"ml-2 text-gray-400 text-base"},Kt={class:"text-sm text-slate-500"},Qt={class:"flex-1 overflow-auto p-6"},te={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},ee=["src"],se={class:"p-3"},le={class:"text-sm font-medium text-gray-700"},ae=B({__name:"details",setup(oe){const w=P(),j=U();A(()=>{I(),H()});const o=i({}),I=async()=>{const _=await E({patient_id:w.query.patient_id});o.value=_.data},R=i([]),H=async()=>{const _=await W({patient_id:w.query.patient_id});R.value=_.data},c=i({}),T=async(_,e)=>{const r=await F({patient_id:w.query.patient_id,visit_id:_.visit_id.toString(),category_id:e.category_id.toString()});r.data[0].attachment_url.length?(p.value=!0,r.data[0].attachment_url=r.data[0].attachment_url.map(v=>"/"+v),c.value=r.data[0]):(b.value=!0,Y.value=e,C.value=r.data)},b=i(!1),Y=i({}),C=i([{date:"2025-07-09",item:"白细胞计数 (WBC)",result:6.2,unit:"×10⁹/L",referenceRange:"4.0 - 10.0"},{date:"2025-07-09",item:"红细胞计数 (RBC)",result:4.5,unit:"×10¹²/L",referenceRange:"4.00 - 5.50"},{date:"2025-07-09",item:"血红蛋白 (HGB)",result:145,unit:"g/L",referenceRange:"130 - 175"},{date:"2025-07-09",item:"红细胞压积 (HCT)",result:44,unit:"%",referenceRange:"40 - 50"},{date:"2025-07-09",item:"平均红细胞体积 (MCV)",result:90,unit:"fL",referenceRange:"82 - 100"},{date:"2025-07-09",item:"平均红细胞血红蛋白 (MCH)",result:32.2,unit:"pg",referenceRange:"27 - 34"},{date:"2025-07-09",item:"平均红细胞血红蛋白浓度 (MCHC)",result:358,unit:"g/L",referenceRange:"320 - 360"},{date:"2025-07-09",item:"血小板计数 (PLT)",result:255,unit:"×10⁹/L",referenceRange:"100 - 300"},{date:"2025-07-09",item:"中性粒细胞百分比 (NEUT%)",result:60,unit:"%",referenceRange:"50 - 70"},{date:"2025-07-09",item:"淋巴细胞百分比 (LYM%)",result:30,unit:"%",referenceRange:"20 - 40"},{date:"2025-07-09",item:"中性粒细胞计数 (NEUT#)",result:3.72,unit:"×10⁹/L",referenceRange:"2.0 - 7.0"},{date:"2025-07-09",item:"淋巴细胞计数 (LYM#)",result:1.86,unit:"×10⁹/L",referenceRange:"1.0 - 3.0"}]),p=i(!1),z=()=>{j.back()};return(_,e)=>{const r=x("el-icon"),v=x("el-button"),n=x("el-table-column"),M=x("el-table"),L=x("el-drawer");return f(),g(D,null,[t("div",G,[t("div",O,[t("div",X,[a(v,{onClick:z,type:"text",class:"text-blue-600 hover:text-blue-800 p-0 h-auto font-medium"},{default:d(()=>[a(r,{class:"mr-1",size:"16"},{default:d(()=>[a(u(S))]),_:1}),e[2]||(e[2]=y(" 返回上一级 "))]),_:1,__:[2]})]),e[3]||(e[3]=t("div",{class:"flex items-center justify-between"},[t("h1",{class:"text-xl font-bold text-gray-800"},"患者详情")],-1))]),t("div",Z,[t("div",$,[t("div",J,s(o.value?.name?.charAt(0)||""),1),t("div",null,[t("h2",K,s(o.value.name),1),t("div",Q,[t("span",{class:N(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",o.value.gender===0?"bg-blue-100 text-blue-800":"bg-pink-100 text-pink-800"])},s(o.value.gender===0?"男":"女"),3),t("span",tt," 诊断编号："+s(o.value.medical_insurance_no),1)])])]),t("div",et,[t("div",st,[e[4]||(e[4]=t("span",{class:"text-gray-600 text-xs block mb-1"},"出生日期",-1)),t("span",lt,s(u(m)(o.value.birth_date).format("YYYY-MM-DD")),1)]),t("div",at,[e[5]||(e[5]=t("span",{class:"text-gray-600 text-xs block mb-1"},"民族",-1)),t("span",ot,s(o.value.nation),1)]),t("div",nt,[e[6]||(e[6]=t("span",{class:"text-gray-600 text-xs block mb-1"},"婚姻状况",-1)),t("span",dt,s(o.value.marital_status===0?"未婚":o.value.marital_status===1?"已婚":"离异"),1)]),t("div",rt,[e[7]||(e[7]=t("span",{class:"text-gray-600 text-xs block mb-1"},"身份证号",-1)),t("span",it,s(o.value.id_card),1)]),t("div",ut,[e[8]||(e[8]=t("span",{class:"text-gray-600 text-xs block mb-1"},"居住地址",-1)),t("span",ct,s(o.value.address),1)])])]),(f(!0),g(D,null,V(R.value,(l,h)=>(f(),g("div",{class:"bg-white rounded-xl shadow-md border border-gray-200 p-4 mb-3",key:h},[t("div",_t,[e[21]||(e[21]=t("h2",{class:"text-lg font-semibold text-gray-800 mb-3"},"就诊记录",-1)),t("div",mt,[e[13]||(e[13]=t("h3",{class:"text-sm font-semibold text-blue-800 mb-2"},"入院信息",-1)),t("div",gt,[t("div",xt,[e[9]||(e[9]=t("span",{class:"text-blue-700 w-16"},"入院日期：",-1)),t("span",ft,s(u(m)(l.visit_date).format("YYYY-MM-DD")),1)]),t("div",bt,[e[10]||(e[10]=t("span",{class:"text-blue-700 w-16"},"是否出院：",-1)),t("span",pt,s(l.is_completed_text),1)]),t("div",vt,[e[11]||(e[11]=t("span",{class:"text-blue-700 w-16"},"入院类型：",-1)),t("span",ht,s(l.visit_type_text),1)]),t("div",yt,[e[12]||(e[12]=t("span",{class:"text-blue-700 w-16"},"就诊方式:",-1)),t("span",wt,s(l.visit_mode_text),1)])])]),t("div",Yt,[e[20]||(e[20]=t("h3",{class:"text-sm font-semibold text-green-800 mb-2"},null,-1)),t("div",kt,[t("div",Dt,[e[14]||(e[14]=t("span",{class:"text-green-700 w-16"},"诊断编码：",-1)),t("span",Rt,s(l.inpatient_no),1)]),t("div",Ct,[e[15]||(e[15]=t("span",{class:"text-green-700 w-16"},"诊断信息：",-1)),t("span",Mt,s(l.diagnosis),1)]),t("div",Lt,[e[16]||(e[16]=t("span",{class:"text-green-700 w-16"},"就诊费用：",-1)),t("span",Vt,"￥"+s(l.total_fee),1)]),t("div",jt,[e[17]||(e[17]=t("span",{class:"text-green-700 w-16"},"医疗保险：",-1)),t("span",It,s(l.medical_insurance_status_text),1)]),t("div",Ht,[e[18]||(e[18]=t("span",{class:"text-green-700 w-16"},"症状描述：",-1)),t("span",Tt,s(l.symptoms),1)]),t("div",zt,[e[19]||(e[19]=t("span",{class:"text-green-700 w-16"},"医嘱：",-1)),t("span",Bt,s(l.doctor_advice),1)])])])]),t("div",At,[e[23]||(e[23]=t("h3",{class:"text-sm font-semibold text-gray-800 mb-3"},"检查项目",-1)),a(M,{data:l.lab_results,border:"",stripe:"",class:"w-full",style:{width:"100%"},"header-cell-style":{backgroundColor:"#f8fafc",color:"#374151",fontWeight:"600"},"row-style":{transition:"all 0.2s"}},{default:d(()=>[a(n,{prop:"category_name",label:"检查方法名称"}),a(n,{prop:"last_test_date",label:"检查日期"},{default:d(({row:k})=>[t("span",null,s(u(m)(k.last_test_date).format("YYYY-MM-DD")),1)]),_:1}),a(n,{label:"操作",fixed:"right"},{default:d(({row:k})=>[a(v,{type:"primary",link:"",size:"small",onClick:ne=>T(l,k)},{default:d(()=>e[22]||(e[22]=[y(" 查看详情 ")])),_:2,__:[22]},1032,["onClick"])]),_:2},1024)]),_:2},1032,["data"])])]))),128))]),a(L,{modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=l=>b.value=l),direction:"ttb",size:"80vh","with-header":!1,"before-close":()=>b.value=!1},{default:d(()=>[t("div",Pt,[t("div",Nt,[t("div",St,[t("div",Ut,[e[24]||(e[24]=t("div",{class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center mr-4"},[t("span",{class:"text-white text-lg font-bold"},"检")],-1)),t("div",null,[t("h2",qt,s(Y.value.category_name),1),t("p",Et,"检测日期："+s(u(m)(Y.value.last_test_date).format("YYYY-MM-DD HH:mm:ss")),1)])])])]),t("div",Wt,[e[25]||(e[25]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4"}," 检测结果 ",-1)),t("div",Ft,[a(M,{data:C.value,border:"",style:{width:"100%"},"header-cell-style":{backgroundColor:"#f8fafc",color:"#374151",fontWeight:"600",fontSize:"14px",padding:"16px 12px",textAlign:"center"},"cell-style":{padding:"14px 12px",fontSize:"14px"},class:"laboratory-table"},{default:d(()=>[a(n,{prop:"test_name",label:"检查项目",width:"200"}),a(n,{prop:"result_value",label:"结果",width:"100"}),a(n,{prop:"result_unit",label:"单位",width:"100"}),a(n,{prop:"normal_range",label:"参考范围"}),a(n,{prop:"flag_text",label:"标识文本"}),a(n,{prop:"result_text",label:"检验结果"}),a(n,{prop:"result_text_doctor",label:"医生结果"}),a(n,{prop:"result_text_ai",label:"AI结果"}),a(n,{prop:"test_time",label:"检验时间",width:"200"},{default:d(l=>[y(s(u(m)(l.test_time).format("YYYY-MM-DD hh:mm:ss")),1)]),_:1})]),_:1},8,["data"])])])])]),_:1},8,["modelValue","before-close"]),a(L,{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=l=>p.value=l),direction:"ttb",size:"80vh","with-header":!1,"before-close":()=>p.value=!1},{default:d(()=>[t("div",Gt,[t("div",Ot,[t("div",Xt,[t("div",Zt,[e[26]||(e[26]=t("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg"},[t("span",{class:"text-white text-sm font-bold"},"CT")],-1)),t("div",null,[t("h3",$t,[y(s(c.value?.test_name||"")+" ",1),t("div",Jt,s(u(m)(c.value.created_at).format("YYYY-MM-DD HH:mm:ss")),1)]),t("p",Kt,"共 "+s(c.value.attachment_url.length)+" 张影像切片",1)])])])]),t("div",Qt,[t("div",te,[(f(!0),g(D,null,V(c.value.attachment_url,(l,h)=>(f(),g("div",{key:h,class:"group bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-all duration-300 cursor-pointer"},[t("img",{src:l,alt:"CT影像切片",class:"w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105"},null,8,ee),t("div",se,[t("p",le,s(c.value?.test_name)+" "+s(h+1),1)])]))),128))])])])]),_:1},8,["modelValue","before-close"])],64)}}}),ie=q(ae,[["__scopeId","data-v-3a87fba3"]]);export{ie as default};
