import{d as O,o as R,r as g,au as L,c as r,e,a1 as U,aa as S,f as c,w as _,g as b,F as h,n as y,k as m,t as l,p as G,Y as k,h as f,x,ab as H,a as J,O as n,P as K}from"./index-iZTeaJac.js";import{t as Q}from"./index-dUdC-nAQ.js";import{h as W}from"./index-C-7UpYWQ.js";const X={class:"min-h-screen bg-gray-50 px-4 py-6"},Z={class:"max-w-7xl mx-auto"},ee={class:"mb-8 flex flex-col bg-white p-6 rounded-xl shadow-sm border border-gray-100"},te={class:"flex items-center space-x-4"},se={class:"mt-2 flex items-center justify-between"},ae={id:"fileContainer"},le={class:"flex items-center space-x-3"},ne={class:"ml-1 text-xs opacity-75"},oe={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},re={class:"p-6"},ie={class:"mb-4"},de=["title"],ue={class:"flex items-center"},ce={class:"space-y-3 mb-6"},me={class:"flex items-center text-sm"},ge={class:"text-gray-700"},_e={class:"flex items-center text-sm"},ve={class:"text-gray-600 font-medium"},be={class:"pt-4 border-t border-gray-100 text-right"},fe=["onClick"],xe={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},pe={class:"p-6"},he={class:"mb-4"},ye=["title"],ke={class:"flex items-center"},we={class:"space-y-3 mb-6"},Ce={class:"flex items-center text-sm"},Ye={class:"text-gray-700"},De={class:"flex items-center text-sm"},Ie={class:"text-green-600 font-medium"},Te={class:"pt-4 border-t border-gray-100 text-right"},Me=["onClick"],Le=O({__name:"history",setup(Se){const w=J();R(()=>{C(),Y()});const o=g("4"),N=()=>{o.value==="4"?C():Y()},d=g([]),C=async()=>{const t=await Q({model_id:o.value});d.value=t.data},z=t=>{w.push({name:"imagingDataIntegration_details",query:{inference_id:t.inference_id,inference_name:t.inference_name,submit_time:t.submit_time}})},u=g([]),Y=async()=>{const t=await W();u.value=t.data},F=t=>{w.push({name:"imagingDataIntegration_detailsImg",query:{inference_id:t.inference_id,inference_name:t.task_name,submit_time:t.submit_time}})},i=g("all"),V=g([{label:"全部",value:"all"},{label:"完成",value:"2"},{label:"待处理",value:"0"},{label:"处理中",value:"1"},{label:"失败",value:"3"}]),B=t=>{i.value=t},P=t=>o.value==="4"?t==="all"?d.value.length:d.value.filter(a=>String(a.status)===t).length:t==="all"?u.value.length:u.value.filter(a=>String(a.status)===t).length,$=L(()=>i.value==="all"?d.value:d.value.filter(t=>String(t.status)===i.value)),j=L(()=>i.value==="all"?u.value:u.value.filter(t=>String(t.status)===i.value)),D=t=>({0:"from-orange-400 to-orange-500",1:"from-blue-400 to-blue-500",2:"from-green-400 to-green-500",3:"from-red-400 to-red-500"})[t]||"from-gray-400 to-gray-500",I=t=>({0:"warning",1:"primary",2:"success",3:"danger"})[t]||"info",T=t=>({0:"待处理",1:"处理中",2:"完成",3:"失败"})[t]||"未知";return(t,a)=>{const p=b("el-tag"),q=b("el-button"),M=b("el-radio-button"),A=b("el-radio-group");return n(),r("div",X,[e("div",Z,[a[9]||(a[9]=U('<div class="mb-2 flex items-center" data-v-c728e6a8><div class="flex items-center space-x-3 mb-3" data-v-c728e6a8><div class="w-1 h-8 bg-gradient-to-b from-blue-500 to-indigo-600 rounded-full" data-v-c728e6a8></div><h1 class="text-3xl font-bold text-gray-800" data-v-c728e6a8>影像推理结果</h1></div><p class="text-gray-600 ml-7" data-v-c728e6a8>管理和查看所有影像推理的执行情况</p></div>',1)),e("div",ee,[e("div",te,[a[1]||(a[1]=e("h2",{class:"text-xl font-semibold text-gray-700"},"任务列表",-1)),c(p,{class:"bg-blue-50 text-blue-700 border-blue-200 font-medium"},{default:_(()=>[m(" 共 "+l(o.value==="4"?d.value.length:u.value.length)+" 个任务 ",1)]),_:1})]),e("div",se,[e("div",ae,[e("div",le,[a[2]||(a[2]=e("span",{class:"text-sm font-medium text-gray-600"},"状态筛选：",-1)),(n(!0),r(h,null,y(V.value,s=>(n(),G(q,{key:s.value,type:i.value===s.value?"primary":"default",size:"small",onClick:v=>B(s.value),class:k(["transition-all duration-200",i.value===s.value?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-600 border-gray-300 hover:border-blue-400 hover:text-blue-600"])},{default:_(()=>[m(l(s.label)+" ",1),e("span",ne,"("+l(P(s.value))+")",1)]),_:2},1032,["type","onClick","class"]))),128))])]),c(A,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=s=>o.value=s),onChange:N},{default:_(()=>[c(M,{label:"诊断",value:"4"}),c(M,{label:"图像分割",value:"3"})]),_:1},8,["modelValue"])])]),o.value==="4"?(n(),r("div",oe,[(n(!0),r(h,null,y($.value,(s,v)=>(n(),r("div",{key:v,class:"bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-300 overflow-hidden"},[e("div",{class:k(["h-1 bg-gradient-to-r",D(s.status)])},null,2),e("div",re,[e("div",ie,[e("h3",{class:"text-lg font-semibold text-gray-800 mb-2 truncate",title:s.inference_name},l(s.inference_name),9,de),e("div",ue,[c(p,{type:I(s.status),size:"small",class:"font-medium"},{default:_(()=>[m(l(T(s.status)),1)]),_:2},1032,["type"])])]),e("div",ce,[e("div",me,[a[3]||(a[3]=e("span",{class:"text-gray-500 w-16 flex-shrink-0"},"提交时间",-1)),e("span",ge,l(f(x)(s.submit_time).format("YYYY-MM-DD HH:mm")),1)]),e("div",_e,[a[4]||(a[4]=e("span",{class:"text-gray-500 w-16 flex-shrink-0"},"完成时间",-1)),e("span",ve,l(s.complete_time!==null?f(x)(s.completed_time).format("YYYY-MM-DD HH:mm"):"暂无"),1)])]),e("div",be,[e("button",{size:"small",class:"px-4 py-1 text-sm text-blue-600 bg-blue-50 hover:bg-blue-100 hover:text-blue-700 rounded-lg transition-all duration-200 font-medium border border-blue-200",onClick:H(E=>z(s),["stop"])},a[5]||(a[5]=[e("i",{class:"fas fa-eye mr-1"},null,-1),m(" 查看详情 ")]),8,fe)])])]))),128))])):S("",!0),o.value==="3"?(n(),r("div",xe,[(n(!0),r(h,null,y(j.value,(s,v)=>(n(),r("div",{key:v,class:"bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-300 overflow-hidden"},[e("div",{class:k(["h-1 bg-gradient-to-r",D(s.status)])},null,2),e("div",pe,[e("div",he,[e("h3",{class:"text-lg font-semibold text-gray-800 mb-2 truncate",title:s.task_name},l(s.task_name),9,ye),e("div",ke,[c(p,{type:I(s.status),size:"small",class:"font-medium"},{default:_(()=>[m(l(T(s.status)),1)]),_:2},1032,["type"])])]),e("div",we,[e("div",Ce,[a[6]||(a[6]=e("span",{class:"text-gray-500 w-16 flex-shrink-0"},"提交时间",-1)),e("span",Ye,l(f(x)(s.submit_time).format("YYYY-MM-DD HH:mm")),1)]),e("div",De,[a[7]||(a[7]=e("span",{class:"text-gray-500 w-16 flex-shrink-0"},"完成时间",-1)),e("span",Ie,l(s.completed_time!==null?f(x)(s.completed_time).format("YYYY-MM-DD HH:mm"):"暂无"),1)])]),e("div",Te,[e("button",{size:"small",class:"px-4 py-1 text-sm text-blue-600 bg-blue-50 hover:bg-blue-100 hover:text-blue-700 rounded-lg transition-all duration-200 font-medium border border-blue-200",onClick:H(E=>F(s),["stop"])},a[8]||(a[8]=[e("i",{class:"fas fa-eye mr-1"},null,-1),m(" 查看详情 ")]),8,Me)])])]))),128))])):S("",!0)])])}}}),Fe=K(Le,[["__scopeId","data-v-c728e6a8"]]);export{Fe as default};
