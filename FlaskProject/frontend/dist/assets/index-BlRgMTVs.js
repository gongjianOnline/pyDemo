import{d as G,r as x,o as O,c as d,e,a1 as U,aa as v,f as o,w as r,g as _,F as D,n as M,k as i,t as a,p as q,Y as w,h as c,a2 as J,x as f,ab as K,G as Q,ac as W,m as X,a as Z,O as n,P as ee}from"./index-iZTeaJac.js";import{t as te,a as se}from"./index-dUdC-nAQ.js";const le={class:"min-h-screen bg-gray-50 px-4 py-6"},ae={class:"max-w-7xl mx-auto"},oe={class:"mb-8 flex items-center justify-between bg-white p-6 rounded-xl shadow-sm border border-gray-100"},re={class:"flex flex-col"},ne={class:"flex items-center space-x-4"},de={key:0,class:"ml-1 text-blue-500"},ie={id:"fileContainer",class:"mt-4"},ce={class:"flex items-center space-x-3"},ue={class:"ml-1 text-xs opacity-75"},me={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},xe=["onClick"],ge={class:"p-6"},_e={class:"mb-4"},fe=["title"],ve={class:"flex items-center"},be={class:"space-y-3 mb-6"},ye={class:"flex items-center text-sm"},pe={class:"text-gray-700"},he={class:"flex items-center text-sm"},ke={class:"text-gray-700"},we={class:"flex items-center text-sm"},Ce={class:"text-gray-700"},Ye={key:0,class:"flex items-center text-sm"},De=["title"],Me={class:"pt-4 border-t border-gray-100 text-right"},He=["onClick"],Se={key:0,class:"text-center py-16"},ze={key:1,class:"text-center py-16"},Fe={class:"space-y-6"},Ne={class:"flex items-center space-x-3"},Pe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Ve={class:"space-y-2"},Be={class:"text-lg font-semibold text-gray-800"},Le={class:"space-y-2"},Re={class:"text-lg text-gray-800"},$e={class:"space-y-2"},je={class:"text-lg text-gray-800"},Ie={class:"space-y-2"},Te={class:"text-lg text-gray-800"},Ae={key:0,class:"space-y-2"},Ee={class:"text-lg text-gray-800"},Ge={class:"flex items-center justify-between"},Oe={class:"flex items-center space-x-3"},Ue={class:"max-h-96 overflow-auto"},qe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Je={class:"p-4"},Ke={class:"space-y-3 mb-4"},Qe={class:"flex items-center text-sm"},We={class:"text-gray-800 font-semibold"},Xe={class:"flex items-center text-sm"},Ze={class:"text-gray-700"},et={class:"flex items-center text-sm"},tt={class:"text-gray-700"},st={class:"flex items-center text-sm"},lt=["title"],at={class:"flex items-center text-sm"},ot={class:"text-gray-700"},rt={class:"flex items-center text-sm"},nt={class:"text-gray-700"},dt={class:"space-y-3"},it={key:0,class:"space-y-2"},ct=["href"],ut=G({__name:"index",setup(mt){const B=Z(),C=x({}),g=x([]),u=x([]),b=x("all"),L=x([{label:"全部",value:"all"},{label:"已完成",value:"2"},{label:"执行失败",value:"3"},{label:"处理中",value:"1"},{label:"待处理",value:"0"}]),Y=x(!1),m=x({});O(()=>{R()});const R=async()=>{const l=await te({model_id:"1"});u.value=l.data,g.value=l.data},H=l=>{b.value=l,l==="all"?g.value=u.value:g.value=u.value.filter(t=>t.status.toString()===l)},$=l=>l==="all"?u.value.length:u.value.filter(t=>t.status.toString()===l).length,S=async l=>{Y.value=!0;const t=await se({inference_id:l.inference_id});m.value=t.data,C.value=t.data.results},z=()=>{B.push({name:"diseaseRiskPredictionNew"})},F=l=>{switch(l){case 0:return"待处理";case 1:return"处理中";case 2:return"已完成";case 3:return"执行失败";default:return"未知状态"}},N=l=>{switch(l){case 0:return"warning";case 1:return"primary";case 2:return"success";case 3:return"danger";default:return"info"}},j=l=>({0:"from-orange-400 to-orange-500",1:"from-blue-400 to-blue-500",2:"from-green-400 to-green-500",3:"from-red-400 to-red-500"})[l]||"from-gray-400 to-gray-500",I=l=>({低风险:"from-green-400 to-green-500",中风险:"from-yellow-400 to-yellow-500",高风险:"from-orange-400 to-orange-500",极高风险:"from-red-400 to-red-500"})[l]||"from-blue-400 to-blue-500",T=l=>({低风险:"bg-green-50 text-green-700 border border-green-200",中风险:"bg-yellow-50 text-yellow-700 border border-yellow-200",高风险:"bg-orange-50 text-orange-700 border border-orange-200",极高风险:"bg-red-50 text-red-700 border border-red-200 font-semibold"})[l]||"bg-blue-50 text-blue-700 border border-blue-200",A=l=>{switch(l){case 0:return"男";case 1:return"女";default:return"未知"}};return(l,t)=>{const y=_("el-tag"),p=_("el-button"),h=_("el-icon"),P=_("el-empty"),V=_("el-card"),E=_("el-dialog");return n(),d("div",le,[e("div",ae,[t[28]||(t[28]=U('<div class="mb-2 flex items-center" data-v-98ff856d><div class="flex items-center space-x-3 mb-3" data-v-98ff856d><div class="w-1 h-8 bg-gradient-to-b from-blue-500 to-indigo-600 rounded-full" data-v-98ff856d></div><h1 class="text-3xl font-bold text-gray-800" data-v-98ff856d>疾病风险预测管理</h1></div><p class="text-gray-600 ml-7" data-v-98ff856d>管理和查看所有疾病风险预测的执行情况</p></div>',1)),e("div",oe,[e("div",re,[e("div",ne,[t[2]||(t[2]=e("h2",{class:"text-xl font-semibold text-gray-700"},"预测列表",-1)),o(y,{class:"bg-blue-50 text-blue-700 border-blue-200 font-medium"},{default:r(()=>[i(" 共 "+a(g.value.length)+" 个预测 ",1),b.value!=="all"?(n(),d("span",de," (筛选自 "+a(u.value.length)+" 个) ",1)):v("",!0)]),_:1})]),e("div",ie,[e("div",ce,[t[3]||(t[3]=e("span",{class:"text-sm font-medium text-gray-600"},"状态筛选：",-1)),(n(!0),d(D,null,M(L.value,s=>(n(),q(p,{key:s.value,type:b.value===s.value?"primary":"default",size:"small",onClick:k=>H(s.value),class:w(["transition-all duration-200",b.value===s.value?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-600 border-gray-300 hover:border-blue-400 hover:text-blue-600"])},{default:r(()=>[i(a(s.label)+" ",1),e("span",ue,"("+a($(s.value))+")",1)]),_:2},1032,["type","onClick","class"]))),128))])])]),o(p,{type:"primary",onClick:z,size:"large",class:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 shadow-lg hover:shadow-xl transition-all duration-300"},{default:r(()=>[o(h,{class:"mr-2"},{default:r(()=>[o(c(J))]),_:1}),t[4]||(t[4]=i(" 新增预测 "))]),_:1,__:[4]})]),e("div",me,[(n(!0),d(D,null,M(g.value,s=>(n(),d("div",{key:s.inference_id,class:"bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-300 overflow-hidden cursor-pointer",onClick:k=>S(s)},[e("div",{class:w(["h-1 bg-gradient-to-r",j(s.status)])},null,2),e("div",ge,[e("div",_e,[e("h3",{class:"text-lg font-semibold text-gray-800 mb-2 truncate",title:s.inference_name},a(s.inference_name),9,fe),e("div",ve,[o(y,{type:N(s.status),size:"small",class:"font-medium"},{default:r(()=>[i(a(F(s.status)),1)]),_:2},1032,["type"])])]),e("div",be,[e("div",ye,[t[5]||(t[5]=e("span",{class:"text-gray-500 w-16 flex-shrink-0"},"医生",-1)),e("span",pe,a(s.doctor_id),1)]),e("div",he,[t[6]||(t[6]=e("span",{class:"text-gray-500 w-16 flex-shrink-0"},"提交时间",-1)),e("span",ke,a(c(f)(s.submit_time).format("YYYY-MM-DD HH:mm")),1)]),e("div",we,[t[7]||(t[7]=e("span",{class:"text-gray-500 w-16 flex-shrink-0"},"完成时间",-1)),e("span",Ce,a(s.complete_time?c(f)(s.complete_time).format("YYYY-MM-DD HH:mm"):"-"),1)]),s.remarks?(n(),d("div",Ye,[t[8]||(t[8]=e("span",{class:"text-gray-500 w-16 flex-shrink-0"},"备注",-1)),e("span",{class:"text-gray-700 truncate",title:s.remarks},a(s.remarks),9,De)])):v("",!0)]),e("div",Me,[e("button",{size:"small",class:"px-4 py-1 text-sm text-blue-600 bg-blue-50 hover:bg-blue-100 hover:text-blue-700 rounded-lg transition-all duration-200 font-medium border border-blue-200",onClick:K(k=>S(s),["stop"])},t[9]||(t[9]=[e("i",{class:"fas fa-eye mr-1"},null,-1),i(" 查看详情 ")]),8,He)])])],8,xe))),128))]),u.value.length===0?(n(),d("div",Se,[o(P,{description:"暂无疾病风险预测数据","image-size":120,class:"text-gray-500"},{default:r(()=>[o(p,{type:"primary",onClick:z,class:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 border-0"},{default:r(()=>t[10]||(t[10]=[i(" 创建第一个预测 ")])),_:1,__:[10]})]),_:1})])):g.value.length===0&&u.value.length>0?(n(),d("div",ze,[o(P,{description:"当前筛选条件下暂无数据","image-size":120,class:"text-gray-500"},{default:r(()=>[o(p,{type:"primary",onClick:t[0]||(t[0]=s=>H("all")),class:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 border-0"},{default:r(()=>t[11]||(t[11]=[i(" 查看全部数据 ")])),_:1,__:[11]})]),_:1})])):v("",!0),o(E,{modelValue:Y.value,"onUpdate:modelValue":t[1]||(t[1]=s=>Y.value=s),width:"90%",class:"custom-dialog"},{default:r(()=>[e("div",Fe,[o(V,{class:"border-0 shadow-md"},{header:r(()=>[e("div",Ne,[o(h,{class:"text-blue-500 text-xl"},{default:r(()=>[o(c(Q))]),_:1}),t[12]||(t[12]=e("span",{class:"text-lg font-semibold"},"预测基本信息",-1))])]),default:r(()=>[e("div",Pe,[e("div",Ve,[t[13]||(t[13]=e("label",{class:"text-sm font-medium text-gray-600"},"推理任务",-1)),e("div",Be,a(m.value.inference_name),1)]),e("div",Le,[t[14]||(t[14]=e("label",{class:"text-sm font-medium text-gray-600"},"提交时间",-1)),e("div",Re,a(c(f)(m.value.submit_time).format("YYYY年MM月DD日 HH:mm:ss")),1)]),e("div",$e,[t[15]||(t[15]=e("label",{class:"text-sm font-medium text-gray-600"},"完成时间",-1)),e("div",je,a(c(f)(m.value.complete_time).format("YYYY年MM月DD日 HH:mm:ss")),1)]),e("div",Ie,[t[16]||(t[16]=e("label",{class:"text-sm font-medium text-gray-600"},"状态",-1)),e("div",Te,[o(y,{type:N(m.value.status),size:"large"},{default:r(()=>[i(a(F(m.value.status)),1)]),_:1},8,["type"])])]),m.value.remarks?(n(),d("div",Ae,[t[17]||(t[17]=e("label",{class:"text-sm font-medium text-gray-600"},"备注",-1)),e("div",Ee,a(m.value.remarks),1)])):v("",!0)])]),_:1}),o(V,{class:"border-0 shadow-md"},{header:r(()=>[e("div",Ge,[e("div",Oe,[o(h,{class:"text-green-500 text-xl"},{default:r(()=>[o(c(X))]),_:1}),t[18]||(t[18]=e("span",{class:"text-lg font-semibold"},"患者预测结果",-1))]),o(y,{type:"info",size:"small"},{default:r(()=>[i(" 共 "+a(C.value?.length||0)+" 位患者 ",1)]),_:1})])]),default:r(()=>[e("div",Ue,[e("div",qe,[(n(!0),d(D,null,M(C.value,(s,k)=>(n(),d("div",{key:k,class:"bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-300 overflow-hidden"},[e("div",{class:w(["h-1 bg-gradient-to-r",I(s.conclusion)])},null,2),e("div",Je,[e("div",Ke,[e("div",Qe,[t[19]||(t[19]=e("span",{class:"text-gray-500 w-12 flex-shrink-0"},"姓名",-1)),e("span",We,a(s.name),1)]),e("div",Xe,[t[20]||(t[20]=e("span",{class:"text-gray-500 w-12 flex-shrink-0"},"性别",-1)),e("span",Ze,a(A(s.gender)),1)]),e("div",et,[t[21]||(t[21]=e("span",{class:"text-gray-500 w-12 flex-shrink-0"},"生日",-1)),e("span",tt,a(c(f)(s.birth_date).format("YYYY-MM-DD")),1)]),e("div",st,[t[22]||(t[22]=e("span",{class:"text-gray-500 w-12 flex-shrink-0"},"地址",-1)),e("span",{class:"text-gray-700 truncate",title:s.address},a(s.address),9,lt)]),e("div",at,[t[23]||(t[23]=e("span",{class:"text-gray-500 w-12 flex-shrink-0"},"电话",-1)),e("span",ot,a(s.phone),1)]),e("div",rt,[t[24]||(t[24]=e("span",{class:"text-gray-500 w-12 flex-shrink-0"},"完成",-1)),e("span",nt,a(c(f)(s.inferred_at).format("MM-DD HH:mm")),1)])]),e("div",dt,[e("div",null,[t[25]||(t[25]=e("label",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2 block"}," 预测结论 ",-1)),e("div",{class:w(["rounded-lg p-3 text-sm text-gray-800 leading-relaxed",T(s.conclusion)])},a(s.result_text),3)]),s.attachment_url?(n(),d("div",it,[t[27]||(t[27]=e("label",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"}," 附件 ",-1)),e("div",null,[e("a",{href:s.attachment_url,target:"_blank",class:"inline-flex items-center px-3 py-1 rounded-lg bg-blue-50 text-blue-600 hover:bg-blue-100 transition-colors duration-200 text-sm"},[o(h,{class:"mr-1"},{default:r(()=>[o(c(W))]),_:1}),t[26]||(t[26]=i(" 查看附件 "))],8,ct)])])):v("",!0)])])]))),128))])])]),_:1})])]),_:1},8,["modelValue"])])])}}}),_t=ee(ut,[["__scopeId","data-v-98ff856d"]]);export{_t as default};
