import{t as le}from"./index-2Fl6aFRQ.js";import{n as ae}from"./index-C-7UpYWQ.js";import{d as se,r as p,au as b,aw as te,o as oe,c as i,a1 as ne,f as o,w as n,h as s,aE as D,ao as de,M as ie,e as l,a8 as ue,aq as E,A as re,aF as A,F as h,n as k,aG as G,aa as I,aH as ve,aI as ce,k as c,t as u,aJ as pe,an as T,af as me,aK as ge,aL as _e,p as fe,aM as w,a4 as be,aN as ye,aO as he,aP as ke,ap as xe,G as we,aB as Ve,O as d,P as Ce}from"./index-iZTeaJac.js";const Ee={class:"w-full h-full p-6 bg-gray-50"},Me={class:"flex justify-between items-center mb-6 pb-4 border-b border-gray-100"},Fe={class:"w-[120px] text-lg font-semibold text-gray-800 flex items-center"},Se={class:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 mb-6"},De={class:"mb-4"},Ie={key:0,class:"flex flex-wrap gap-4 items-end"},Te={class:"flex gap-2"},Pe={class:"flex justify-between items-center mb-4"},ze={class:"text-sm text-gray-600"},Le={class:"font-semibold text-blue-600"},Ue={key:0,class:"ml-2"},je={class:"font-semibold text-green-600"},Oe={class:"flex items-center gap-2"},Be={class:"mt-6 flex justify-center"},Ne={key:0,class:"space-y-6"},$e={class:"flex items-center text-blue-700"},Ae={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ge={class:"info-item"},qe={class:"value"},He={class:"info-item"},Je={class:"value"},We={class:"info-item md:col-span-2"},Qe={class:"value"},Re={class:"flex items-center"},Xe={class:"font-semibold"},Ye={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Ze={class:"param-label"},Ke={class:"param-value"},el={key:1,class:"space-y-4"},ll={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},al={class:"detail-item"},sl={class:"detail-value"},tl={class:"detail-item"},ol={class:"detail-value"},nl={class:"detail-item"},dl={class:"detail-value"},il={class:"detail-item md:col-span-2 lg:col-span-3"},ul={class:"detail-value text-xs"},rl={class:"detail-item"},vl={class:"detail-value"},cl={class:"detail-item"},pl={class:""},ml=["src"],gl={key:2,class:"text-center py-8 text-gray-500"},_l={class:"model_img_out_div"},fl={class:"model_img_div"},bl=["src"],yl=se({__name:"index",setup(hl){const M=p(!1),V=p("1"),F=p(!1),r=p(null),y=p([]),m=p([]),_=p({task_name:"",task_id:"",remarks:""}),v=p(1),g=p(10),P=[5,10,20,50,100],q=[{value:"1",label:"病例模型"},{value:"2",label:"诊疗方案模型"},{value:"3",label:"影像分割模型"},{value:"4",label:"影像诊断模型"},{value:"5",label:"病理组学模型"}],z=[{key:"task_name",label:"模型名称"},{key:"task_id",label:"模型ID"},{key:"remarks",label:"备注"}],S=b(()=>V.value==="3"),H=b(()=>r.value?`模型详情 - ${r.value.task_name}`:"模型详情"),L=b(()=>r.value?.params?Object.entries(r.value.params).map(([t,e])=>({label:t,value:e})):[]),U=b(()=>r.value?.models||[]),j=b(()=>y.value.length),x=b(()=>m.value.length===0?y.value:y.value.filter(t=>m.value.every(e=>{const f=_.value[e]?.trim();if(!f)return!0;const a=t[e];return a&&String(a).toLowerCase().includes(f.toLowerCase())}))),J=b(()=>{const t=(v.value-1)*g.value,e=t+g.value;return x.value.slice(t,e)});te(x,()=>{v.value=1});const O=async(t=V.value)=>{try{M.value=!0;let e;t==="3"?(e=await ae(),y.value=e.data?.map(f=>({...f,remarks:f.remark}))||[]):(e=await le({model_id:t}),y.value=e.data||[]),B(),v.value=1}catch{ie.error("加载模型列表失败"),y.value=[]}finally{M.value=!1}},W=t=>{r.value=t,F.value=!0},Q=t=>z.find(e=>e.key===t)?.label||t,R=()=>{Object.keys(_.value).forEach(t=>{m.value.includes(t)||(_.value[t]="")})},X=()=>{v.value=1},Y=()=>{v.value=1},B=()=>{m.value=[],Object.keys(_.value).forEach(t=>{_.value[t]=""}),v.value=1},N=t=>{g.value=t,v.value=1},Z=t=>{v.value=t},K=t=>({0:"待处理",1:"训练中",2:"完成",3:"失败"})[t]||"未知状态",ee=t=>({0:"info",1:"warning",2:"success",3:"danger"})[t]||"info",$=t=>t?`//${t}`:"";return oe(()=>{O()}),(t,e)=>{const f=_e("loading");return d(),i("div",Ee,[e[27]||(e[27]=ne('<div class="mb-2 flex items-center" data-v-795950f4><div class="flex items-center space-x-3 mb-3" data-v-795950f4><div class="w-1 h-8 bg-gradient-to-b from-blue-500 to-indigo-600 rounded-full" data-v-795950f4></div><h1 class="text-3xl font-bold text-gray-800" data-v-795950f4>模型管理</h1></div><p class="text-gray-600 ml-7" data-v-795950f4>管理和查看所有模型情况</p></div>',1)),o(s(D),{class:"shadow-lg border-0 rounded-xl"},{default:n(()=>[l("div",Me,[l("h3",Fe,[o(s(E),{class:"mr-2 text-blue-500"},{default:n(()=>[o(s(re))]),_:1}),e[6]||(e[6]=l("div",null,"模型列表",-1))]),o(s(A),{modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=a=>V.value=a),placeholder:"选择模型类型",size:"large",class:"w-56",onChange:O},{default:n(()=>[(d(),i(h,null,k(q,a=>o(s(G),{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),l("div",Se,[l("div",De,[e[7]||(e[7]=l("span",{class:"text-sm font-medium text-gray-700 block mb-2"},"筛选条件：",-1)),o(s(ve),{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=a=>m.value=a),onChange:R},{default:n(()=>[(d(),i(h,null,k(z,a=>o(s(ce),{key:a.key,label:a.key,class:"mr-4 mb-2"},{default:n(()=>[c(u(a.label),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),m.value.length>0?(d(),i("div",Ie,[(d(!0),i(h,null,k(m.value,a=>(d(),i("div",{key:a,class:"flex-1 min-w-48"},[o(s(pe),{modelValue:_.value[a],"onUpdate:modelValue":C=>_.value[a]=C,placeholder:`请输入${Q(a)}`,clearable:"",class:"w-full",onInput:X},null,8,["modelValue","onUpdate:modelValue","placeholder"])]))),128)),l("div",Te,[o(s(T),{type:"primary",onClick:Y,icon:s(me)},{default:n(()=>e[8]||(e[8]=[c(" 查询 ")])),_:1,__:[8]},8,["icon"]),o(s(T),{onClick:B,icon:s(ge)},{default:n(()=>e[9]||(e[9]=[c(" 重置 ")])),_:1,__:[9]},8,["icon"])])])):I("",!0)]),l("div",Pe,[l("div",ze,[e[12]||(e[12]=c(" 共 ")),l("span",Le,u(j.value),1),e[13]||(e[13]=c(" 条数据 ")),x.value.length!==j.value?(d(),i("span",Ue,[e[10]||(e[10]=c(" （筛选后 ")),l("span",je,u(x.value.length),1),e[11]||(e[11]=c(" 条） "))])):I("",!0)]),l("div",Oe,[e[14]||(e[14]=l("span",{class:"text-sm text-gray-600"},"每页显示：",-1)),o(s(A),{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=a=>g.value=a),size:"small",style:{width:"80px"},onChange:N},{default:n(()=>[(d(),i(h,null,k(P,a=>o(s(G),{key:a,label:a,value:a},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),ue((d(),fe(s(ye),{data:J.value,stripe:"",class:"w-full","header-cell-style":{backgroundColor:"#f8fafc",color:"#374151",fontWeight:"600"},"empty-text":"暂无数据"},{default:n(()=>[o(s(w),{type:"index",label:"序号",width:"60",align:"center"},{default:n(({$index:a})=>[c(u((v.value-1)*g.value+a+1),1)]),_:1}),o(s(w),{prop:"task_name",label:"模型名称","min-width":"150","show-overflow-tooltip":""}),o(s(w),{prop:"task_id",label:"模型ID",width:"120","show-overflow-tooltip":""}),o(s(w),{prop:"remarks",label:"备注","min-width":"150","show-overflow-tooltip":""}),o(s(w),{label:"操作",width:"100",align:"center"},{default:n(({row:a})=>[o(s(T),{type:"primary",link:"",onClick:C=>W(a),icon:s(be)},{default:n(()=>e[15]||(e[15]=[c(" 详情 ")])),_:2,__:[15]},1032,["onClick","icon"])]),_:1})]),_:1},8,["data"])),[[f,M.value]]),l("div",Be,[o(s(he),{"current-page":v.value,"onUpdate:currentPage":e[3]||(e[3]=a=>v.value=a),"page-size":g.value,"onUpdate:pageSize":e[4]||(e[4]=a=>g.value=a),"page-sizes":P,total:x.value.length,layout:"total, sizes, prev, pager, next, jumper",background:"",class:"pagination-custom",onSizeChange:N,onCurrentChange:Z},null,8,["current-page","page-size","total"])])]),_:1}),o(s(de),{modelValue:F.value,"onUpdate:modelValue":e[5]||(e[5]=a=>F.value=a),title:H.value,width:"70%","destroy-on-close":"","show-close":!1,class:"model-detail-dialog"},{default:n(()=>[r.value?(d(),i("div",Ne,[o(s(D),{class:"border-0 shadow-sm bg-gradient-to-r from-blue-50 to-indigo-50"},{header:n(()=>[l("div",$e,[o(s(E),{class:"mr-2"},{default:n(()=>[o(s(ke))]),_:1}),e[16]||(e[16]=l("span",{class:"font-semibold"},"基本信息",-1))])]),default:n(()=>[l("div",Ae,[l("div",Ge,[e[17]||(e[17]=l("span",{class:"label"},"模型名称",-1)),l("span",qe,u(r.value.task_name),1)]),l("div",He,[e[18]||(e[18]=l("span",{class:"label"},"模型ID",-1)),l("span",Je,u(r.value.task_id),1)]),l("div",We,[e[19]||(e[19]=l("span",{class:"label"},"备注",-1)),l("span",Qe,u(r.value.remarks||"暂无描述"),1)])])]),_:1}),o(s(D),{class:"border-0 shadow-sm"},{header:n(()=>[l("div",Re,[o(s(E),{class:"mr-2"},{default:n(()=>[o(s(Ve))]),_:1}),l("span",Xe,u(S.value?"模型详情":"模型参数"),1)])]),default:n(()=>[!S.value&&L.value.length>0?(d(),i("div",Ye,[(d(!0),i(h,null,k(L.value,a=>(d(),i("div",{key:a.label,class:"param-card"},[l("div",Ze,u(a.label),1),l("div",Ke,u(a.value),1)]))),128))])):S.value&&U.value.length>0?(d(),i("div",el,[(d(!0),i(h,null,k(U.value,(a,C)=>(d(),i("div",{key:C,class:"model-detail-card"},[l("div",ll,[l("div",al,[e[20]||(e[20]=l("span",{class:"detail-label"},"Dice",-1)),l("span",sl,u(a.dice),1)]),l("div",tl,[e[21]||(e[21]=l("span",{class:"detail-label"},"Fold",-1)),l("span",ol,u(a.fold),1)]),l("div",nl,[e[22]||(e[22]=l("span",{class:"detail-label"},"模型类型",-1)),l("span",dl,u(a.model_type),1)]),l("div",il,[e[23]||(e[23]=l("span",{class:"detail-label"},"路径",-1)),l("span",ul,u(a.path),1)]),l("div",rl,[e[24]||(e[24]=l("span",{class:"detail-label"},"备注",-1)),l("span",vl,u(a.remark||"暂无"),1)]),l("div",cl,[e[25]||(e[25]=l("span",{class:"detail-label"},"状态",-1)),o(s(xe),{type:ee(a.status),class:"detail-value"},{default:n(()=>[c(u(K(a.status)),1)]),_:2},1032,["type"])])]),l("div",pl,[l("img",{src:$(a.file_path||""),alt:""},null,8,ml)])]))),128))])):(d(),i("div",gl,[o(s(E),{class:"text-4xl mb-2"},{default:n(()=>[o(s(we))]),_:1}),e[26]||(e[26]=l("p",null,"暂无参数信息",-1))])),l("div",_l,[l("div",fl,[l("img",{src:$(r.value.file_path||""),alt:""},null,8,bl)])])]),_:1})])):I("",!0)]),_:1},8,["modelValue","title"])])}}}),Vl=Ce(yl,[["__scopeId","data-v-795950f4"]]);export{Vl as default};
