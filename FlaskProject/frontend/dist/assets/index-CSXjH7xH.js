import{d as T,o as E,r as m,c as d,e,a1 as G,aa as N,f as a,w as l,g,F as k,n as C,k as c,t as r,p as U,Y as p,h as f,a2 as q,x as D,ab as J,G as K,m as Q,a as W,O as n,P as X}from"./index-iZTeaJac.js";import{t as Z,a as ee}from"./index-Bqa-GVRE.js";const te={class:"min-h-screen bg-gray-50 px-4 py-6"},se={class:"max-w-7xl mx-auto"},oe={class:"mb-8 flex items-center justify-between bg-white p-6 rounded-xl shadow-sm border border-gray-100"},ae={class:"flex flex-col"},le={class:"flex items-center space-x-4"},re={key:0,class:"ml-1 text-blue-500"},ne={id:"fileContainer",class:"mt-4"},de={class:"flex items-center space-x-3"},ie={class:"ml-1 text-xs opacity-75"},ce={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},ue=["onClick"],me={class:"p-6"},ge={class:"mb-4"},fe=["title"],be={class:"flex items-center"},_e={class:"space-y-3 mb-6"},xe={class:"flex items-center text-sm"},ve={class:"text-gray-700"},pe={class:"pt-4 border-t border-gray-100 text-right"},he=["onClick"],ye={key:0,class:"text-center py-16"},we={key:1,class:"text-center py-16"},ke={class:"space-y-6"},Ce={class:"flex items-center space-x-3"},De={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ze={class:"space-y-2"},Ye={class:"text-lg font-semibold text-gray-800"},Me={class:"space-y-2"},Pe={class:"text-lg text-gray-800"},Se={class:"flex items-center justify-between"},Ne={class:"flex items-center space-x-3"},Fe={class:"max-h-96 overflow-auto"},Ve={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Be={class:"p-4"},He={class:"space-y-3 mb-4"},$e={class:"flex items-center text-sm"},je={class:"text-gray-800 font-semibold"},Ie={class:"flex items-center text-sm"},Le={class:"text-gray-700"},Re={class:"flex items-center text-sm"},Ae={class:"text-gray-700"},Oe={class:"space-y-3"},Te=T({__name:"index",setup(Ee){E(()=>{B()});const F=W(),u=m([]),i=m([]),_=m("all"),V=m([{label:"全部",value:"all"},{label:"已完成",value:"2"},{label:"执行失败",value:"3"},{label:"处理中",value:"1"}]),B=async()=>{const o=await Z();i.value=o.data,u.value=o.data},z=o=>{_.value=o,o==="all"?u.value=i.value:u.value=i.value.filter(t=>t.status.toString()===o)},H=o=>o==="all"?i.value.length:i.value.filter(t=>t.status.toString()===o).length,h=m(!1),b=m({}),Y=o=>{h.value=!0,$(o)},$=async o=>{const t=await ee({inference_id:o.inference_id});b.value=t.data},M=()=>{F.push({name:"treatmentPlanOptimizationNew"})},j=o=>({0:"from-orange-400 to-orange-500",1:"from-blue-400 to-blue-500",2:"from-green-400 to-green-500",3:"from-red-400 to-red-500"})[o]||"from-gray-400 to-gray-500",I=o=>({0:"from-lime-400 to-lime-500",1:"from-green-400 to-green-500",2:"from-orange-400 to-orange-500",3:"from-rose-400 to-rose-500",4:"from-red-400 to-red-500"})[o]||"from-gray-400 to-gray-500",L=o=>{switch(o){case 0:return"待处理";case 1:return"处理中";case 2:return"已完成";case 3:return"执行失败";default:return"未知状态"}},R=o=>{switch(o){case 0:return"warning";case 1:return"primary";case 2:return"success";case 3:return"danger";default:return"info"}},A=o=>{switch(o){case"0":return"bg-lime-50 text-lime-700 border border-lime-200";case"1":return"bg-green-50 text-green-700 border border-green-200";case"2":return"bg-orange-50 text-orange-700 border border-orange-200";case"3":return"bg-rose-50 text-rose-700 border border-rose-200 font-semibold";case"4":return"bg-red-50 text-red-700 border border-red-200 font-semibold"}};return(o,t)=>{const y=g("el-tag"),x=g("el-button"),w=g("el-icon"),P=g("el-empty"),S=g("el-card"),O=g("el-dialog");return n(),d("div",te,[e("div",se,[t[17]||(t[17]=G('<div class="mb-2 flex items-center" data-v-5ef661cf><div class="flex items-center space-x-3 mb-3" data-v-5ef661cf><div class="w-1 h-8 bg-gradient-to-b from-blue-500 to-indigo-600 rounded-full" data-v-5ef661cf></div><h1 class="text-3xl font-bold text-gray-800" data-v-5ef661cf>临床研究管理</h1></div><p class="text-gray-600 ml-7" data-v-5ef661cf>管理和查看所有临床研究的执行情况</p></div>',1)),e("div",oe,[e("div",ae,[e("div",le,[t[2]||(t[2]=e("h2",{class:"text-xl font-semibold text-gray-700"},"方案列表",-1)),a(y,{class:"bg-blue-50 text-blue-700 border-blue-200 font-medium"},{default:l(()=>[c(" 共 "+r(u.value.length)+" 个方案 ",1),_.value!=="all"?(n(),d("span",re," (筛选自 "+r(i.value.length)+" 个) ",1)):N("",!0)]),_:1})]),e("div",ne,[e("div",de,[t[3]||(t[3]=e("span",{class:"text-sm font-medium text-gray-600"},"状态筛选：",-1)),(n(!0),d(k,null,C(V.value,s=>(n(),U(x,{key:s.value,type:_.value===s.value?"primary":"default",size:"small",onClick:v=>z(s.value),class:p(["transition-all duration-200",_.value===s.value?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-600 border-gray-300 hover:border-blue-400 hover:text-blue-600"])},{default:l(()=>[c(r(s.label)+" ",1),e("span",ie,"("+r(H(s.value))+")",1)]),_:2},1032,["type","onClick","class"]))),128))])])]),a(x,{type:"primary",onClick:M,size:"large",class:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 shadow-lg hover:shadow-xl transition-all duration-300"},{default:l(()=>[a(w,{class:"mr-2"},{default:l(()=>[a(f(q))]),_:1}),t[4]||(t[4]=c(" 新增方案 "))]),_:1,__:[4]})]),e("div",ce,[(n(!0),d(k,null,C(u.value,s=>(n(),d("div",{key:s.inference_id,class:"bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-300 overflow-hidden cursor-pointer",onClick:v=>Y(s)},[e("div",{class:p(["h-1 bg-gradient-to-r",j(s.status)])},null,2),e("div",me,[e("div",ge,[e("h3",{class:"text-lg font-semibold text-gray-800 mb-2 truncate",title:s.inference_name},r(s.inference_name),9,fe),e("div",be,[a(y,{type:R(s.status),size:"small",class:"font-medium"},{default:l(()=>[c(r(L(s.status)),1)]),_:2},1032,["type"])])]),e("div",_e,[e("div",xe,[t[5]||(t[5]=e("span",{class:"text-gray-500 w-16 flex-shrink-0"},"创建时间",-1)),e("span",ve,r(f(D)(s.submit_time).format("YYYY-MM-DD HH:mm")),1)])]),e("div",pe,[e("button",{size:"small",class:"px-4 py-1 text-sm text-blue-600 bg-blue-50 hover:bg-blue-100 hover:text-blue-700 rounded-lg transition-all duration-200 font-medium border border-blue-200",onClick:J(v=>Y(s),["stop"])},t[6]||(t[6]=[e("i",{class:"fas fa-eye mr-1"},null,-1),c(" 查看详情 ")]),8,he)])])],8,ue))),128))]),i.value.length===0?(n(),d("div",ye,[a(P,{description:"暂无诊疗方案数据","image-size":120,class:"text-gray-500"},{default:l(()=>[a(x,{type:"primary",onClick:M,class:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 border-0"},{default:l(()=>t[7]||(t[7]=[c(" 创建第一个方案 ")])),_:1,__:[7]})]),_:1})])):u.value.length===0&&i.value.length>0?(n(),d("div",we,[a(P,{description:"当前筛选条件下暂无数据","image-size":120,class:"text-gray-500"},{default:l(()=>[a(x,{type:"primary",onClick:t[0]||(t[0]=s=>z("all")),class:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 border-0"},{default:l(()=>t[8]||(t[8]=[c(" 查看全部数据 ")])),_:1,__:[8]})]),_:1})])):N("",!0),a(O,{modelValue:h.value,"onUpdate:modelValue":t[1]||(t[1]=s=>h.value=s),width:"90%",class:"custom-dialog"},{default:l(()=>[e("div",ke,[a(S,{class:"border-0 shadow-md"},{header:l(()=>[e("div",Ce,[a(w,{class:"text-blue-500 text-xl"},{default:l(()=>[a(f(K))]),_:1}),t[9]||(t[9]=e("span",{class:"text-lg font-semibold"},"方案基本信息",-1))])]),default:l(()=>[e("div",De,[e("div",ze,[t[10]||(t[10]=e("label",{class:"text-sm font-medium text-gray-600"},"方案名称",-1)),e("div",Ye,r(b.value.inference_name),1)]),e("div",Me,[t[11]||(t[11]=e("label",{class:"text-sm font-medium text-gray-600"},"创建时间",-1)),e("div",Pe,r(f(D)(b.value.submit_time).format("YYYY年MM月DD日 HH:mm:ss")),1)])])]),_:1}),a(S,{class:"border-0 shadow-md"},{header:l(()=>[e("div",Se,[e("div",Ne,[a(w,{class:"text-green-500 text-xl"},{default:l(()=>[a(f(Q))]),_:1}),t[12]||(t[12]=e("span",{class:"text-lg font-semibold"},"患者诊疗结果",-1))]),a(y,{type:"info",size:"small"},{default:l(()=>[c(" 共 "+r(b.value.results?.length||0)+" 位患者 ",1)]),_:1})])]),default:l(()=>[e("div",Fe,[e("div",Ve,[(n(!0),d(k,null,C(b.value.results,(s,v)=>(n(),d("div",{key:v,class:"bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-300 overflow-hidden"},[e("div",{class:p(["h-1 bg-gradient-to-r",I(s.conclusion)])},null,2),e("div",Be,[e("div",He,[e("div",$e,[t[13]||(t[13]=e("span",{class:"text-gray-500 w-12 flex-shrink-0"},"姓名",-1)),e("span",je,r(s.name),1)]),e("div",Ie,[t[14]||(t[14]=e("span",{class:"text-gray-500 w-12 flex-shrink-0"},"年龄",-1)),e("span",Le,r(s.age)+"岁 / "+r(s.gender),1)]),e("div",Re,[t[15]||(t[15]=e("span",{class:"text-gray-500 w-12 flex-shrink-0"},"时间",-1)),e("span",Ae,r(f(D)(s.inferred_at).format("MM-DD")),1)])]),e("div",Oe,[e("div",null,[t[16]||(t[16]=e("label",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2 block"}," 推理结果 ",-1)),e("div",{class:p(["rounded-lg p-3 text-sm text-gray-800 leading-relaxed",A(s.conclusion)])},r(s.result_text),3)])])])]))),128))])])]),_:1})])]),_:1},8,["modelValue"])])])}}}),qe=X(Te,[["__scopeId","data-v-5ef661cf"]]);export{qe as default};
