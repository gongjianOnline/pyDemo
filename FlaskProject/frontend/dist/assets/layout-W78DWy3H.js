import{d as ie,u as de,o as me,a as ce,r as b,b as ue,S as _e,c as f,e,f as a,w as s,g as l,F as V,_ as fe,h as r,i as Y,t as u,j as ge,k as v,l as B,m as T,s as pe,n as E,p as A,q as F,v as xe,x as H,y as be,z as L,A as ve,B as he,C as we,D as ye,E as Ne,G as Pe,H as ke,I as De,J as Ie,K as Me,L as G,M as R,N as Oe,O as _,P as Ce}from"./index-iZTeaJac.js";const Ve={class:"w-full h-full"},Ae={class:"flex items-center cursor-pointer px-5 py-3 rounded-xl",style:{outline:"none !important",border:"none !important"}},Re={class:"w-10 h-10 bg-gradient-to-br from-blue-400 to-cyan-500 rounded-xl flex items-center justify-center mr-3 shadow-lg"},je={class:"text-white"},ze={class:"text-sm font-semibold"},Se={key:0},Ue={class:"flex items-center"},Ye={class:"w-8 h-8 rounded-lg bg-slate-700/50 flex items-center justify-center mr-3"},Be={class:"menu-title text-slate-200 font-medium"},Te={class:"flex items-center"},Ee={class:"sub-menu-title text-slate-300 text-sm"},Fe={key:1},He={class:"flex items-center"},Le={class:"w-8 h-8 rounded-lg bg-slate-700/50 flex items-center justify-center mr-3"},Ge={class:"menu-title text-slate-200 font-medium"},$e={class:"h-full p-4 overflow-y-auto"},qe={class:"p-2 bg-gray-50/50"},Je={class:"flex items-center bg-white p-5 rounded-xl mb-5 shadow-sm border border-gray-100"},Ke={class:"mr-4"},We=["src"],Qe={key:1,class:"w-16 h-16 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center"},Xe={class:"flex-1"},Ze={class:"text-xl font-bold text-gray-800 mb-1"},et={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},tt={class:"bg-white rounded-xl border border-gray-100 overflow-hidden"},at={class:"bg-blue-50 px-4 py-3 border-b border-blue-100"},st={class:"flex items-center"},ot={class:"p-4 space-y-3"},nt={class:"flex justify-between items-center"},lt={class:"text-gray-800 font-semibold text-sm"},rt={class:"flex justify-between items-center"},it={class:"bg-white rounded-xl border border-gray-100 overflow-hidden"},dt={class:"bg-cyan-50 px-4 py-3 border-b border-cyan-100"},mt={class:"flex items-center"},ct={class:"p-4 space-y-3"},ut={class:"flex justify-between items-center"},_t={class:"text-gray-800 font-semibold text-sm"},ft={class:"flex justify-between items-center"},gt={class:"text-gray-800 font-semibold text-sm"},pt={class:"bg-white rounded-xl border border-gray-100 overflow-hidden md:col-span-2"},xt={class:"bg-emerald-50 px-4 py-3 border-b border-emerald-100"},bt={class:"flex items-center"},vt={class:"p-4 grid grid-cols-1 md:grid-cols-2 gap-4"},ht={class:"flex justify-between items-center"},wt={class:"text-gray-800 font-semibold text-sm"},yt={class:"flex justify-between items-center"},Nt={class:"text-gray-800 font-semibold text-sm"},Pt={class:"p-2 bg-gray-50/50"},kt={class:"p-2 bg-gray-50/50"},Dt={class:"p-2 bg-gray-50/50"},It={class:"p-2 bg-gray-50/50"},Mt=ie({__name:"layout",setup(Ot){const h=ce(),d=de();me(()=>{if(!d.getToken){h.replace({name:"login"});return}if(d.getHospitalID!="1"){h.replace({name:"telemedicine"}),d.setMenuActive("telemedicine");return}J(),$()});const m=b({}),$=async()=>{const c=await ue();d.setUserName(c.data.name),d.setDoctorId(c.data.doctor_id),m.value=c.data},q=c=>{d.setMenuActive(c),h.push({name:c})},j=c=>({dataCollection:G,statsAnalysisModeling:Me,diseaseRiskPrediction:Ie,treatmentPlanOptimization:De,followUp:ke,clinicalResearchSupport:Pe,imagingDataIntegration:Ne,telemedicine:ye,pathologyOmics:we,modelManagement:he,log:ve})[c]||G,J=()=>{if(d.getHospitalID!="1"){g.value=K;return}switch(d.getRoleID){case"1":g.value=X;break;case"2":g.value=W;break;case"3":g.value=Q;break}},g=b([]),K=[{routerName:"telemedicine",name:"远程医疗"}],W=[{routerName:"dataCollection",name:"数据采集"},{routerName:"statsAnalysisModeling",name:"统计分析与建模",children:[{routerName:"statsAnalysisModeling",name:"训练建模"},{routerName:"statsAnalysisModeling_visualization",name:"模型可视化"}]},{routerName:"diseaseRiskPrediction",name:"疾病风险预测"},{routerName:"treatmentPlanOptimization",name:"临床研究",children:[{routerName:"treatmentPlanOptimization",name:"临床研究管理"},{routerName:"treatmentPlanOptimization_training",name:"临床研究训练"}]},{routerName:"followUp",name:"随访"},{routerName:"clinicalResearchSupport",name:"临床研究支持"},{routerName:"imagingDataIntegration",name:"影像数据整合",children:[{routerName:"imagingDataIntegration",name:"训练建模"},{routerName:"imagingDataIntegration_reasoning",name:"模型推理"},{routerName:"imagingDataIntegration_history",name:"历史推理"}]},{routerName:"telemedicine",name:"远程医疗"},{routerName:"pathologyOmics",name:"病理组学",children:[{routerName:"pathologyOmics",name:"病理组学推理"},{routerName:"pathologyOmics_training",name:"病理组学训练"}]},{routerName:"modelManagement",name:"模型管理"}],Q=[{routerName:"dataCollection",name:"数据采集"},{routerName:"diseaseRiskPrediction",name:"疾病风险预测"},{routerName:"treatmentPlanOptimization",name:"临床研究",children:[{routerName:"treatmentPlanOptimization",name:"临床研究管理"}]},{routerName:"followUp",name:"随访"},{routerName:"clinicalResearchSupport",name:"临床研究支持"},{routerName:"imagingDataIntegration",name:"影像数据整合",children:[{routerName:"imagingDataIntegration_reasoning",name:"模型推理"},{routerName:"imagingDataIntegration_history",name:"历史推理"}]},{routerName:"telemedicine",name:"远程医疗"},{routerName:"pathologyOmics",name:"病理组学",children:[{routerName:"pathologyOmics",name:"病理组学推理"}]}],X=[{routerName:"dataCollection",name:"数据采集"},{routerName:"statsAnalysisModeling",name:"统计分析与建模",children:[{routerName:"statsAnalysisModeling",name:"训练建模"},{routerName:"statsAnalysisModeling_visualization",name:"模型可视化"}]},{routerName:"diseaseRiskPrediction",name:"疾病风险预测"},{routerName:"treatmentPlanOptimization",name:"临床研究",children:[{routerName:"treatmentPlanOptimization",name:"临床研究管理"},{routerName:"treatmentPlanOptimization_training",name:"临床研究训练"}]},{routerName:"followUp",name:"随访"},{routerName:"clinicalResearchSupport",name:"临床研究支持"},{routerName:"imagingDataIntegration",name:"影像数据整合",children:[{routerName:"imagingDataIntegration",name:"训练建模"},{routerName:"imagingDataIntegration_reasoning",name:"模型推理"},{routerName:"imagingDataIntegration_history",name:"历史推理"}]},{routerName:"telemedicine",name:"远程医疗"},{routerName:"pathologyOmics",name:"病理组学",children:[{routerName:"pathologyOmics",name:"病理组学推理"},{routerName:"pathologyOmics_training",name:"病理组学训练"}]},{routerName:"modelManagement",name:"模型管理"},{routerName:"permissionManagement",name:"权限管理"},{routerName:"log",name:"日志"}],Z=()=>{d.setMenuActive("dataCollection"),d.setToken(""),h.replace({name:"login"})},w=b(!1),ee={key:"hiteamtech@@1233",mode:"ecb",cipherType:"hex"},te=new _e.sm4(ee),p=b(!1),i=b({oldPassword:"",newPassword:"",confirmPassword:""}),ae=async()=>{if(i.value.oldPassword===""){R.error("请输入旧密码");return}if(i.value.newPassword!==i.value.confirmPassword){R.error("两次输入的密码不一致");return}const{doctor_id:c,name:t,gender:n,birth_date:x,department_id:N,title_id:P,phone:k,email:y,avatar_url:D,employee_no:I,id_card:M,remarks:O}=m.value;await Oe({doctor_id:c,name:t,gender:n,birth_date:H(x).format("YYYY-MM-DD"),department_id:N,title_id:P,phone:k,email:y,avatar_url:D,employee_no:I,id_card:M,password:btoa(te.encrypt(i.value.newPassword)),remarks:O}),R.success("修改密码成功"),p.value=!1,i.value.oldPassword="",i.value.newPassword="",i.value.confirmPassword=""};return(c,t)=>{const n=l("el-icon"),x=l("el-dropdown-item"),N=l("el-dropdown-menu"),P=l("el-dropdown"),k=l("el-header"),y=l("el-menu-item"),D=l("el-sub-menu"),I=l("el-menu"),M=l("el-aside"),O=l("router-view"),se=l("el-main"),z=l("el-container"),oe=l("el-tag"),S=l("el-dialog"),C=l("el-input"),ne=l("el-button");return _(),f(V,null,[e("div",Ve,[a(z,{class:"w-full h-full"},{default:s(()=>[a(k,{class:"flex justify-between items-center bg-gradient-to-r from-blue-700 via-blue-800 to-cyan-600 shadow-xl border-b border-blue-600/30"},{default:s(()=>[t[10]||(t[10]=e("div",{class:"flex items-center space-x-4"},[e("div",{class:"p-2 bg-white/10 rounded-xl backdrop-blur-sm"},[e("img",{class:"h-10 w-10 object-contain transform scale-[1.3]",src:fe,alt:"医院logo"})]),e("div",{class:"flex flex-col"},[e("span",{class:"text-lg font-bold text-white tracking-wide"},"单病种数据挖掘平台"),e("span",{class:"text-sm text-blue-100 font-medium"},"河北省第四医院")])],-1)),a(P,{class:"user-dropdown"},{dropdown:s(()=>[a(N,{class:"user-dropdown-menu"},{default:s(()=>[a(x,{class:"dropdown-item hover:bg-blue-50 hover:text-blue-700",onClick:t[0]||(t[0]=o=>p.value=!0)},{default:s(()=>[a(n,{class:"!mr-2 text-blue-600"},{default:s(()=>[a(r(B))]),_:1}),t[7]||(t[7]=v(" 修改密码 "))]),_:1,__:[7]}),a(x,{class:"dropdown-item hover:bg-blue-50 hover:text-blue-700",onClick:t[1]||(t[1]=o=>w.value=!0)},{default:s(()=>[a(n,{class:"!mr-2 text-blue-600"},{default:s(()=>[a(r(T))]),_:1}),t[8]||(t[8]=v(" 个人信息 "))]),_:1,__:[8]}),a(x,{onClick:Z,class:"dropdown-item hover:bg-red-50 text-red-600"},{default:s(()=>[a(n,{class:"!mr-2"},{default:s(()=>[a(r(pe))]),_:1}),t[9]||(t[9]=v(" 退出登录 "))]),_:1,__:[9]})]),_:1})]),default:s(()=>[e("div",Ae,[e("div",Re,[a(n,{class:"text-white text-lg"},{default:s(()=>[a(r(Y),{class:"text-white"})]),_:1})]),e("div",je,[e("div",ze,u(r(d).getUserName)+"医生",1)]),a(n,{class:"ml-3"},{default:s(()=>[a(r(ge),{class:"text-white"})]),_:1})])]),_:1})]),_:1,__:[10]}),a(z,{class:"h-[calc(100vh-60px)]"},{default:s(()=>[a(M,{width:"280px",class:"bg-gradient-to-b from-slate-900 via-slate-800 to-gray-900 shadow-2xl border-r border-slate-700/50"},{default:s(()=>[a(I,{class:"medical-menu h-[calc(100%-10px)] border-none bg-transparent pt-4","default-active":r(d).getMenuActive,onSelect:q,"background-color":"transparent","text-color":"#CBD5E1","active-text-color":"#ffffff"},{default:s(()=>[(_(!0),f(V,null,E(g.value,(o,le)=>(_(),f("div",{key:le},[o.children?(_(),f("div",Se,[a(D,{index:o.routerName,class:"menu-sub-item"},{title:s(()=>[e("div",Ue,[e("div",Ye,[a(n,{class:"text-blue-400 text-base"},{default:s(()=>[(_(),A(F(j(o.routerName))))]),_:2},1024)]),e("span",Be,u(o.name),1)])]),default:s(()=>[(_(!0),f(V,null,E(o.children,(U,re)=>(_(),A(y,{index:U.routerName,key:re,class:"sub-menu-item mx-4 my-1 rounded-lg"},{default:s(()=>[e("div",Te,[t[11]||(t[11]=e("div",{class:"w-1.5 h-1.5 bg-cyan-400 rounded-full mr-3"},null,-1)),e("span",Ee,u(U.name),1)])]),_:2},1032,["index"]))),128))]),_:2},1032,["index"])])):(_(),f("div",Fe,[a(y,{index:o.routerName,class:"menu-item mx-4 my-2 rounded-lg"},{default:s(()=>[e("div",He,[e("div",Le,[a(n,{class:"text-blue-400 text-base"},{default:s(()=>[(_(),A(F(j(o.routerName))))]),_:2},1024)]),e("span",Ge,u(o.name),1)])]),_:2},1032,["index"])]))]))),128))]),_:1},8,["default-active"])]),_:1}),a(se,{class:"bg-gradient-to-br from-gray-50 to-blue-50/30 overflow-hidden"},{default:s(()=>[e("div",$e,[a(O)])]),_:1})]),_:1})]),_:1})]),a(S,{modelValue:w.value,"onUpdate:modelValue":t[2]||(t[2]=o=>w.value=o),width:"680px","show-close":!1,"before-close":()=>w.value=!1,class:"doctor-info-dialog",center:""},{header:s(()=>t[12]||(t[12]=[e("div",{class:"bg-gradient-to-r from-blue-600 to-cyan-600 px-6 py-2 text-center"},[e("h2",{class:"text-xl font-bold text-white mb-1"},"医生基本信息"),e("p",{class:"text-blue-100 text-xs tracking-wide"},"DOCTOR INFORMATION")],-1)])),default:s(()=>[e("div",qe,[e("div",Je,[e("div",Ke,[m.value.avatar_url?(_(),f("img",{key:0,src:m.value?.avatar_url,alt:"医生头像",class:"w-16 h-16 rounded-xl object-cover border-2 border-gray-200"},null,8,We)):(_(),f("div",Qe,[a(n,null,{default:s(()=>[a(r(Y),{class:"text-white"})]),_:1})]))]),e("div",Xe,[e("h3",Ze,u(m.value?.name||"未知"),1),t[13]||(t[13]=e("div",{class:"bg-emerald-50 text-emerald-700 px-3 py-1 rounded-lg text-xs font-medium border border-emerald-200 inline-block"}," 账号正常 ",-1))])]),e("div",et,[e("div",tt,[e("div",at,[e("div",st,[a(n,{class:"text-sm mr-2"},{default:s(()=>[a(r(xe),{class:"text-blue-600"})]),_:1}),t[14]||(t[14]=e("h4",{class:"text-blue-700 font-semibold text-sm"},"工作信息",-1))])]),e("div",ot,[e("div",nt,[t[15]||(t[15]=e("span",{class:"text-gray-600 text-sm"},"医生工号",-1)),e("span",lt,u(m.value?.employee_no||"未设置"),1)]),e("div",rt,[t[16]||(t[16]=e("span",{class:"text-gray-600 text-sm"},"在职状态",-1)),a(oe,{type:m.value?.status===0?"danger":"success",size:"small",class:"font-medium"},{default:s(()=>[v(u(m.value?.status===0?"离职":"在职"),1)]),_:1},8,["type"])])])]),e("div",it,[e("div",dt,[e("div",mt,[a(n,{class:"text-sm mr-2"},{default:s(()=>[a(r(T),{class:"text-cyan-600"})]),_:1}),t[17]||(t[17]=e("h4",{class:"text-cyan-700 font-semibold text-sm"},"个人信息",-1))])]),e("div",ct,[e("div",ut,[t[18]||(t[18]=e("span",{class:"text-gray-600 text-sm"},"性别",-1)),e("span",_t,u(m.value?.gender===0?"男":"女"),1)]),e("div",ft,[t[19]||(t[19]=e("span",{class:"text-gray-600 text-sm"},"出生日期",-1)),e("span",gt,u(r(H)(m.value?.birth_date).format("YYYY-MM-DD")),1)])])]),e("div",pt,[e("div",xt,[e("div",bt,[a(n,{class:"text-sm mr-2"},{default:s(()=>[a(r(be),{class:"text-emerald-600"})]),_:1}),t[20]||(t[20]=e("h4",{class:"text-emerald-700 font-semibold text-sm"},"联系信息",-1))])]),e("div",vt,[e("div",ht,[t[21]||(t[21]=e("span",{class:"text-gray-600 text-sm"},"联系电话",-1)),e("span",wt,u(m.value?.phone||"未填写"),1)]),e("div",yt,[t[22]||(t[22]=e("span",{class:"text-gray-600 text-sm"},"身份证号",-1)),e("span",Nt,u(m.value?.id_card||"未填写"),1)])])])])])]),_:1},8,["modelValue","before-close"]),a(S,{modelValue:p.value,"onUpdate:modelValue":t[6]||(t[6]=o=>p.value=o),width:"680px","show-close":!1,"before-close":()=>p.value=!1,class:"doctor-info-dialog",center:""},{header:s(()=>t[23]||(t[23]=[e("div",{class:"bg-gradient-to-r from-blue-600 to-cyan-600 px-6 py-2 text-center"},[e("h2",{class:"text-xl font-bold text-white mb-1"},"修改密码"),e("p",{class:"text-blue-100 text-xs tracking-wide"},"CHANGE PASSWORD")],-1)])),default:s(()=>[e("div",Pt,[a(C,{modelValue:i.value.oldPassword,"onUpdate:modelValue":t[3]||(t[3]=o=>i.value.oldPassword=o),placeholder:"请输入旧密码","show-password":""},{prefix:s(()=>[a(n,{class:"el-input__icon !mr-2"},{default:s(()=>[a(r(B))]),_:1})]),_:1},8,["modelValue"])]),e("div",kt,[a(C,{modelValue:i.value.newPassword,"onUpdate:modelValue":t[4]||(t[4]=o=>i.value.newPassword=o),placeholder:"请输入新密码","show-password":""},{prefix:s(()=>[a(n,{class:"el-input__icon !mr-2"},{default:s(()=>[a(r(L))]),_:1})]),_:1},8,["modelValue"])]),e("div",Dt,[a(C,{modelValue:i.value.confirmPassword,"onUpdate:modelValue":t[5]||(t[5]=o=>i.value.confirmPassword=o),placeholder:"再次输入新密码","show-password":""},{prefix:s(()=>[a(n,{class:"el-input__icon !mr-2"},{default:s(()=>[a(r(L))]),_:1})]),_:1},8,["modelValue"])]),e("div",It,[a(ne,{class:"w-full",type:"primary",onClick:ae},{default:s(()=>t[24]||(t[24]=[v("修改密码")])),_:1,__:[24]})])]),_:1},8,["modelValue","before-close"])],64)}}}),Vt=Ce(Mt,[["__scopeId","data-v-40df571d"]]);export{Vt as default};
